# 2026-02-17 随机点名工具

## 本日目标
- 在课堂工具箱中实现随机点名功能，展示学生幻兽形象

## 完成内容

### 随机点名（RollCall）
- 加载全班学生，以网格形式展示每位学生的幻兽图片和姓名
- 三阶段交互：idle（网格浏览）→ shuffling（聚光灯动画）→ result（大图展示）
- 聚光灯动画：预生成 ~34 步随机路径，间隔从 50ms 到 330ms 二次缓出，最终收敛到目标学生
- 动画结束后高亮定格 600ms，再弹出结果叠加层
- 结果展示：幻兽大图 + 学生姓名 + 幻兽名称/进化阶段
- 防重复机制：已点过的学生不会再被抽中，全部点完后自动重置新一轮
- 无幻兽的学生显示蛋占位图标

## 遇到的问题

### 1. 结果叠加层布局错位
- 症状：结果大图、姓名和按钮与网格重叠错位
- 根因：结果叠加层 `absolute inset-0` 只覆盖网格容器，按钮和计数在容器外部
- 解决：最外层加 `relative`，叠加层覆盖整个组件，按钮和计数移入叠加层内

### 2. 动画到结果缺乏过渡
- 症状：聚光灯停下后立即弹出大图，没有"锁定"感
- 解决：动画最后一步设置 `highlightIndex` 为目标后，延迟 600ms 再切换到 result phase

## 解决方案
见上方各问题的解决方案。

## 相关文件
| 文件 | 操作 |
|------|------|
| `app/src/components/tools/RollCall.tsx` | 新增 |
| `app/src/components/ToolOverlay.tsx` | 修改 — 注册 RollCall 组件 |
